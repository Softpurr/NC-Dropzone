<div>
    <h1>Enregistrement</h1>
</div>

<div id="formulaire">
    <div id="texte">
        <div>
            <label>Nom : </label>
            <input type="text" [(ngModel)]="parachutiste.nomParachutiste" />
        </div>

        <div>
            <label>Parachute : </label>
            <select class="form-select" [(ngModel)]="parachute">
                <option *ngFor="let p of parachutes | async" value="{{ p }}">{{ p.nomHarnais }}</option>
            </select>
        </div>

        <div>
            <label>Hauteur : </label>
            <select class="form-select" [(ngModel)]="hauteur">
                <option *ngFor="let h of hauteurs | async" value="{{ h }}">{{ h }}</option>
            </select>
        </div>
    </div>

    <div>
        <button (click)="rechercherParachutiste(parachutiste.nomParachutiste)" class="btn btn-info" id="bontonEnregistrer">ENREGISTRER</button>
    </div>
</div>


<div>
    <table class="table table-striped" id="table">
        <thead>
            <tr>
                <th>Prenom</th>
                <th>Nom</th>
                <th>Licence</th>
                <th></th>
            </tr>
        </thead>

        <tbody>
            <tr *ngFor="let p of parachutistesByNom">
                <td>{{ p.prenomParachutiste }}</td>
                <td>{{ p.nomParachutiste }}</td>
                <td>{{ p.numLicence }}</td>
                <td>
                    <button (click)="enregistrerParachutiste(p)" id="bontonSelectionner">SELECTIONNER</button>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<div *ngIf="isValide">
    <div>
        <p>Souhaitez-vous sauter avec des collègues ?</p>

        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Prenom</th>
                    <th>Nom</th>
                    <th>Licence</th>
                    <th>Parachute</th>
                    <th></th>
                </tr>
            </thead>

            <tbody>
                <tr *ngFor="let p of parachutistes | async">
                    <td>{{ p.prenomParachutiste }}</td>
                    <td>{{ p.nomParachutiste }}</td>
                    <td>{{ p.numLicence }}</td>
                    <td>
                        <select class="form-select" [(ngModel)]="parachute">
                            <option *ngFor="let p of parachutes | async" value="{{ p }}">{{ p.nomHarnais }}</option>
                        </select>
                    </td>
                    <td>
                        <button (click)="enregistrerParachutiste(p)" id="bontonSelectionner">SELECTIONNER</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <div>
        <p>Votre saut</p>

        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Prenom</th>
                    <th>Nom</th>
                    <th>Licence</th>
                </tr>
            </thead>

            <tbody>
                <tr *ngFor="let p of parachutistesSaut">
                    <td>{{ p.prenomParachutiste }}</td>
                    <td>{{ p.nomParachutiste }}</td>
                    <td>{{ p.numLicence }}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<div *ngIf="isEnregistre">
    <div>
        <p>Votre saut est bien enregistré !</p>
    </div>
</div>